{"version":3,"sources":["webpack:///webpack/bootstrap d89f848605cfb5364fad","webpack:///./src/util/canvas-util.js","webpack:///./src/util/vector_util.js","webpack:///./src/canvas.js"],"names":["randomIntFromRange","randomColor","getDistance","min","max","Math","floor","random","colors","length","x1","y1","x2","y2","xDistance","yDistance","sqrt","pow","clamp","intersectBox","overlap","vcp","pointSide","intersect","input","x0","y0","x3","y3","a0","a1","b0","b1","px","py","x4","y4","pos","x","y","util","vectorUtil","canvas","document","querySelector","c","getContext","width","innerWidth","height","innerHeight","mouse","map","commandKeys","moveSpeed","movementPenalty","backwordsSpeed","addEventListener","event","clientX","clientY","onkeydown","onkeyup","indexOf","keyCode","preventDefault","type","Player","angle","currentSector","undefined","vecAddition","bullets","bulletDelay","lastBullet","update","entries","index","bullet","lifetime","splice","delete","draw","beginPath","moveTo","lineTo","cos","sin","strokeStyle","strokeWidth","stroke","closePath","save","translate","rotate","fillStyle","rect","fill","restore","fire","push","Bullet","move","getSector","friction","updatePos","vertices","neighbours","i","a","b","n","checkForPortal","xd","yd","containsVertices","setSector","id","sectors","filter","sector","dx","dy","radius","fireSpeed","arc","PI","Vertex","equal","other","Sector","color","vCount","floorColor","addVertex","vertex","addNeighbour","getWallNeighbour","vertex1","vertex2","found","portal","drawFloor","setFloorColor","setFriction","Enemy","hp","isHit","player","console","log","enemys","handleInput","slower","back","init","vertices1","vertices2","vertices3","vertices4","sector1","sector2","sector3","sector4","enemy","animate","requestAnimationFrame","clearRect"],"mappings":"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","file":"canvas.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d89f848605cfb5364fad","// Utility Functions\nexport function randomIntFromRange(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nexport function randomColor(colors) {\n  return colors[Math.floor(Math.random() * colors.length)];\n}\n\nexport function getDistance(x1, y1, x2, y2) {\n  let xDistance = x2 - x1;\n  let yDistance = y2 - y1;\n\n  return Math.sqrt(Math.pow(xDistance, 2) + Math.pow(yDistance, 2));\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/canvas-util.js","// Utility Functions\n\n//if input is higher than max or lower than min, return closest option\nexport function clamp(input, min, max){\n  return Math.min(Math.max(input, min), max);\n}\n\n//does the two boxes intersect?\nexport function intersectBox(x0, y0, x1, y1, x2, y2, x3, y3) {\n  return overlap(x0,x1,x2,x3) && overlap(y0,y1,y2,y3);\n}\n\n//find out if number-ranges overlap. Used to determine intersects\nexport function overlap(a0, a1, b0, b1) {\n  return Math.min(a0,a1) <= Math.max(b0,b1) && Math.min(b0,b1) <= Math.max(a0,a1);\n}\n\nexport function vcp(x0, y0, x1, y1) {\n  return ((x0 * y1) - (x1 * y0));\n}\n\nexport function pointSide(px, py, x0, y0, x1, y1) {\n  return vcp((x1-x0), (y1-y0), (px-x0), (py-y0));\n}\n\nexport function intersect(x1, y1, x2, y2, x3, y3, x4, y4){\n  let pos = {};\n\n  pos.x = vcp( vcp( x1,y1,x2,y2 ), ( x1 - x2 ), vcp(x3,y3,x4,y4) ,\n      ( x3 - x4 )) / vcp( ( x1-x2 ),( y1-y2 ),( x3-x4 ),( y3-y4 ) );\n\n  pos.y = vcp( vcp( x1,y1,x2,y2 ), ( y1 - y2 ), vcp(x3,y3,x4,y4) ,\n      ( y3 - y4 )) / vcp( ( x1-x2 ),( y1-y2 ),( x3-x4 ),( y3-y4 ) );\n\n  return pos;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/vector_util.js","import * as util from './util/canvas-util';\nimport * as vectorUtil from './util/vector_util';\n\n// Initial Setup\nconst canvas = document.querySelector('canvas');\nconst c = canvas.getContext('2d');\n\ncanvas.width = innerWidth;\ncanvas.height = innerHeight;\n\n\n// Variables\nlet mouse = {\n  x: innerWidth / 2,\n  y: innerHeight / 2\n};\n\nconst colors = [\n  'black',\n  'red',\n  'blue',\n  'grey'\n];\n\nconst map = {};\n\nconst commandKeys = [224, 17, 91];\n\nconst moveSpeed = 3;\nconst movementPenalty = 0.6;\nconst backwordsSpeed = 0.3;\n\n// Event Listeners\naddEventListener(\"mousemove\", function (event) {\n  mouse.x = event.clientX;\n  mouse.y = event.clientY;\n});\n\naddEventListener(\"resize\", function () {\n  canvas.width = innerWidth;\n  canvas.height = innerHeight;\n\n  // init();\n});\n\nonkeydown = onkeyup = function(event){\n  if(!commandKeys.indexOf(event.keyCode)) {\n    event.preventDefault();\n  }\n  map[event.keyCode] = event.type == 'keydown';\n}\n\n// Player\nfunction Player(x, y) {\n  this.x = x;\n  this.y = y;\n  this.angle = 0;\n  this.width = 15;\n  this.height = 9;\n  this.currentSector = undefined;\n\n  this.vecAddition = []\n  this.bullets = [];\n  this.bulletDelay = 15;\n  this.lastBullet = this.bulletDelay;\n\n  this.update = function () {\n    for (let [index, bullet] of this.bullets.entries()) {\n      bullet.update();\n      if (bullet.lifetime <= 0) {\n        this.bullets.splice(index, 1);\n        bullet.delete();\n      }\n    }\n\n    this.lastBullet++;\n\n    this.draw();\n  };\n\n  this.draw = function () {\n    c.beginPath();\n    c.moveTo(this.x, this.y);\n    c.lineTo(Math.cos(this.angle) * 15 + this.x, Math.sin(this.angle) * 15 + this.y);\n    c.strokeStyle = 'red';\n    c.strokeWidth = 2;\n    c.stroke();\n    c.closePath();\n\n    c.save();\n    c.beginPath();\n    c.translate( (this.x + this.width/2) - (this.width/2), (this.y + this.height/2) - (this.height/2));\n    c.rotate(this.angle);\n    c.fillStyle = 'black';\n    c.rect(-this.width/2, -this.height/2, this.width, this.height);\n    c.fill();\n    c.stroke();\n    c.closePath();\n    c.restore();\n  };\n\n  this.fire = function () {\n    if (this.lastBullet >= this.bulletDelay) {\n      this.bullets.push(\n        new Bullet(\n          this.x,\n          this.y,\n          (Math.cos(this.angle) + (this.x)) - (this.x),\n          (Math.sin(this.angle) + (this.y)) - (this.y)\n        )\n      );\n      this.lastBullet = 0;\n    }\n  };\n\n  this.move = function () {\n    this.x += this.vecAddition[0] * this.getSector().friction;\n    this.y += this.vecAddition[1] * this.getSector().friction;\n  };\n\n  this.updatePos = function (vecAddition) {\n    let vertices = this.getSector().vertices;\n    let neighbours = this.getSector().neighbours;\n\n    for(let i = 0; i < vertices.length; i++){\n      let a = vertices[i], b = vertices[i+1];\n\n      //Loop around for last corner\n      if (i == vertices.length-1) {\n        b = vertices[0];\n      }\n\n      if( vectorUtil.intersectBox(this.x , this.y, (this.x )+vecAddition[0],(this.y )+vecAddition[1], a.x, a.y, b.x, b.y) &&\n        vectorUtil.pointSide((this.x )+vecAddition[0], (this.y )+vecAddition[1], a.x, a.y, b.x, b.y) < 0) {\n\n        // Check if its a neighbour sector on the other side of wall\n        for (let n of neighbours){\n          if(this.checkForPortal(n, vecAddition, a, b)) //did we hit a portal?\n            return true;\n        }\n\n        //Bumps into a wall! Slide along the wall.\n        // This formula is from Wikipedia article \"vector projection\".\n        let xd = b.x - a.x, yd = b.y - a.y;\n        vecAddition[0] =  xd * (vecAddition[0]*xd + yd*vecAddition[1]) / (xd*xd + yd*yd);\n        vecAddition[1] =  yd * (vecAddition[0]*xd + yd*vecAddition[1]) / (xd*xd + yd*yd);\n\n        // //will you slide past this wall?\n        if( (Math.min(a.x, b.x) > this.x+vecAddition[0] || this.x+vecAddition[0] > Math.max(a.x, b.x)) &&\n          (Math.min(a.y, b.y) > this.y+vecAddition[1] || this.y+vecAddition[1] > Math.max(a.y, b.y))  ){\n          //if so, stop player\n          vecAddition[0] = 0;\n          vecAddition[1] = 0;\n        }\n\n      }\n    }\n    this.vecAddition = vecAddition;\n    this.move();\n  };\n\n  this.checkForPortal = function (n, vecAddition, a, b) {\n      if (n.containsVertices(a, b)) {\n        // let hole_low  = n < 0 ?  9e9 : max(getSector()->floor(), n->floor());//height of the heigest floor - gives opening\n        // let hole_high = n < 0 ? -9e9 : min(getSector()->ceiling(),  n->ceiling());//height of the lowest floor- gives opening\n        // let floor_diff = n->floor() - getSector()->floor();// height differens of sector floors\n\n        //is this wall a door? and if so, is it locked?\n        // door* door_ = n->getWallDoor(a,b);\n        // bool isDoorLocked = (door_ != NULL && door_->doorLocked());\n\n        // can player walk/jump through opening?\n        // if(((hole_high - hole_low) >= ((isCrouching ? CROUCHHEIGHT : BODYHEIGHT)+HEADSIZE)) && (z() <= hole_high) && !isDoorLocked &&\n        //   ((!isFalling && floor_diff <= KNEEHEIGHT) || (isFalling && z()-KNEEHEIGHT >= hole_low)))\n        // {\n          this.setSector(n.id);\n          //after changing sector, will you hit a wall?\n          if( (Math.min(a.x, b.x) > this.x+vecAddition[0] || this.x+vecAddition[0] > Math.max(a.x, b.x)) &&\n            (Math.min(a.y, b.y) > this.y+vecAddition[1] || this.y+vecAddition[1] > Math.max(a.y, b.y))  ){\n            //if so, stop player\n            vecAddition[0] = 0;\n            vecAddition[1] = 0;\n          }\n        this.vecAddition = vecAddition;\n          this.move();\n\n          //sets default_z to floor + BodyHeight. Player will move towards this next frame\n          // default_z = getSector()->floor() + BODYHEIGHT;\n          // setVelocity(velo);\t\t//if we fall after sector-change we fall forward.\n          return true;\n        // }\n      }\n      return false;\n  };\n\n  this.setSector = function (id) {\n    this.currentSector = id;\n  };\n\n  this.getSector = function () {\n    return sectors.filter(sector => sector.id === this.currentSector)[0];\n  };\n}\n\n// Bullet\nfunction Bullet(x, y, dx, dy) {\n  this.x = x;\n  this.y = y;\n  this.radius = 2;\n  this.fireSpeed = 5;\n  this.dx = dx * this.fireSpeed;\n  this.dy = dy * this.fireSpeed;\n  this.lifetime = 60;\n\n  this.update = function () {\n    this.x += this.dx;\n    this.y += this.dy;\n    this.lifetime -= 1;\n\n    if(this.lifetime > 0) {\n      this.draw();\n    }\n  }\n\n  this.draw = function () {\n    c.beginPath();\n    c.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);\n    c.fillStyle = 'red';\n    c.fill();\n    c.closePath();\n  }\n\n  this.delete = function () {\n    delete this;\n  };\n}\n\n// Vertex\nfunction Vertex(x, y) {\n  this.x = x;\n  this.y = y;\n\n  this.equal = function (other) {\n    return this.x == other.x && this.y == other.y;\n  };\n}\n\n// Sector\nfunction Sector(id, vertices, color) {\n  this.id = id;\n  this.vCount = vertices.length;\n  this.friction = 1;\n  this.color = color;\n  this.floorColor = 'lightgrey';\n\n  this.vertices = vertices;\n  this.neighbours = [];\n\n  this.addVertex = function (vertex) {\n    this.vertices.push(vertex);\n    this.vCount++;\n  };\n\n  this.addNeighbour = function (sector) {\n    this.neighbours.push(sector);\n  };\n  \n  this.getWallNeighbour = function (vertex1, vertex2) {\n    for (let sector of this.neighbours) {\n      if(sector.containsVertices(vertex1, vertex2)) {\n        return sector;\n      }\n    }\n    return null;\n  };\n\n  this.containsVertices = function (vertex1, vertex2) {\n    let found = 0;\n    for (let vertex of this.vertices) {\n      if (vertex.equal(vertex1) || vertex.equal(vertex2))\n        found++;\n    }\n\n    return found == 2;\n  };\n\n  this.draw = function () {\n    c.beginPath();\n\n    for(let i = 0; i < this.vertices.length; i++) {\n      let a = this.vertices[i], b = this.vertices[i + 1];\n\n      //Loop around for last corner\n      if (i == this.vertices.length-1) {\n        b = vertices[0];\n      }\n\n      if (i == 0) {\n        c.moveTo(vertices[0].x, vertices[0].y);\n\n        for (let n of this.neighbours) {\n          if (n.containsVertices(a, b)) {\n            c.moveTo(b.x, b.y);\n            i++;\n          }\n        }\n\n      } else {\n        let portal = false;\n\n        for (let n of this.neighbours){\n          if(n.containsVertices(a, b)) {\n            if (i == 1) {\n              c.moveTo(a.x, a.y);\n            } else {\n              c.lineTo(a.x, a.y);\n            }\n            c.lineTo(a.x, a.y);\n            c.moveTo(b.x, b.y);\n\n            if (i == this.vertices.length-1) {\n              c.moveTo(b.x, b.y);\n            }\n\n            portal = true;\n          }\n        }\n\n        if (!portal) {\n          c.lineTo(a.x, a.y)\n\n          if (i == this.vertices.length-1) {\n            c.lineTo(b.x, b.y);\n          }\n        }\n      }\n\n    }\n\n    c.strokeStyle = color;\n    c.strokeWidth = 2;\n    c.stroke();\n    c.closePath();\n\n    this.drawFloor();\n  };\n\n  this.drawFloor = function () {\n    c.beginPath();\n\n    for (let [index, vertex]of this.vertices.entries()) {\n      if (index == 0) {\n        c.moveTo(vertex.x, vertex.y);\n      } else {\n        c.lineTo(vertex.x, vertex.y);\n      }\n    }\n\n    c.lineTo(this.vertices[0].x, this.vertices[0].y);\n    c.fillStyle = this.floorColor;\n    c.fill();\n    c.closePath();\n  };\n\n  this.setFloorColor = function (color) {\n    this.floorColor = color;\n  }\n\n  this.setFriction = function (friction) {\n    this.friction = friction;\n  }\n}\n\nfunction Enemy(x, y, hp, sector) {\n  this.x = x;\n  this.y = y;\n  this.color = 'yellow';\n  this.radius = 20;\n\n  this.hp = hp;\n  this.sector = sector;\n\n  this.isHit = function () {\n    for (let bullet of player.bullets) {\n      if (util.getDistance(bullet.x, bullet.y, this.x, this.y) < bullet.radius + this.radius && this.hp > 0) {\n        this.radius -= 5;\n        bullet.lifetime = 0;\n        this.hp--;\n      }\n      if (this.hp == 0) {\n        console.log('dead');\n        this.color = 'red';\n      }\n    }\n  };\n\n  this.update = function () {\n    this.isHit();\n    this.draw();\n  };\n\n  this.draw = function () {\n    c.beginPath();\n    c.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);\n    c.fillStyle = this.color;\n    c.fill();\n    c.strokeStyle = 'black';\n    c.stroke();\n    c.closePath();\n  };\n\n  this.setSector = function (id) {\n    this.currentSector = id;\n  };\n\n  this.getSector = function () {\n    return sectors.filter(sector => sector.id === this.sector)[0];\n  };\n}\n\n// Implementation\nlet player = new Player(150, 100);\n\nlet enemys = [];\nlet sectors = [];\n\nfunction handleInput() {\n  let vecAddition = [ 0, 0 ], slower = false, back = false;\n\n  //up - unused\n  if (map[38]) {\n    console.log('unused - up');\n  }\n  //left - move player angle up (left)\n  if (map[39]) {\n    player.angle += 0.05;\n  }\n  //right - move player angle down (right)\n  if (map[37]) {\n    player.angle -= 0.05;\n  }\n  //down - unused\n  if (map[40]) {\n    console.log('unused - down');\n  }\n  //a - move player left\n  if (map[65]) {\n    vecAddition[0] += Math.sin(player.angle) * moveSpeed;\n    vecAddition[1] -= Math.cos(player.angle) * moveSpeed;\n    slower = true;\n  }\n  //d - move player right\n  if (map[68]) {\n    vecAddition[0] -= Math.sin(player.angle) * moveSpeed;\n    vecAddition[1] += Math.cos(player.angle) * moveSpeed;\n    slower = true;\n  }\n  //w - move player up\n  if (map[87]) {\n    vecAddition[0] += Math.cos(player.angle) * moveSpeed;\n    vecAddition[1] += Math.sin(player.angle) * moveSpeed;\n  }\n  //s - move player down\n  if (map[83]) {\n    vecAddition[0] -= Math.cos(player.angle) * moveSpeed;\n    vecAddition[1] -= Math.sin(player.angle) * moveSpeed;\n    back = true;\n  }\n  //fire bullet\n  if (map[32]) {\n    player.fire();\n  }\n\n  if (back) {\n    vecAddition[0] = vecAddition[0] * backwordsSpeed;\n    vecAddition[1] = vecAddition[1] * backwordsSpeed;\n  } else if(slower) {\n    vecAddition[0] = vecAddition[0] * movementPenalty;\n    vecAddition[1] = vecAddition[1] * movementPenalty;\n  }\n\n  player.updatePos(vecAddition);\n}\n\nfunction init() {\n  let vertices1 = [], vertices2 = [], vertices3 = [], vertices4 = [];\n  vertices1.push(new Vertex(100, 75));\n  vertices1.push(new Vertex(300, 75));\n  vertices1.push(new Vertex(300, 125));\n  vertices1.push(new Vertex(300, 175));\n  vertices1.push(new Vertex(300, 250));\n  vertices1.push(new Vertex(100, 250));\n\n  vertices2.push(new Vertex(300, 125));\n  vertices2.push(new Vertex(500, 125));\n  vertices2.push(new Vertex(500, 175));\n  vertices2.push(new Vertex(400, 175));\n  vertices2.push(new Vertex(300, 175));\n\n  vertices3.push(new Vertex(500, 175));\n  vertices3.push(new Vertex(500, 500));\n  vertices3.push(new Vertex(400, 500));\n  vertices3.push(new Vertex(400, 400));\n  vertices3.push(new Vertex(400, 175));\n\n  vertices4.push(new Vertex(400, 400));\n  vertices4.push(new Vertex(400, 500));\n  vertices4.push(new Vertex(400, 600));\n  vertices4.push(new Vertex(50, 600));\n  vertices4.push(new Vertex(50, 300));\n  vertices4.push(new Vertex(250, 300));\n  vertices4.push(new Vertex(250, 400));\n\n  let sector1 = new Sector(1, vertices1, 'red');\n  let sector2 = new Sector(2, vertices2, 'blue');\n  let sector3 = new Sector(3, vertices3, 'green');\n  let sector4 = new Sector(4, vertices4, 'black');\n  sector4.setFloorColor('green');\n  sector4.setFriction(0.7);\n\n  sector1.addNeighbour(sector2);\n  sector2.addNeighbour(sector1);\n  sector2.addNeighbour(sector3);\n  sector3.addNeighbour(sector2);\n  sector3.addNeighbour(sector4);\n  sector4.addNeighbour(sector3);\n\n  sectors.push(sector1);\n  sectors.push(sector2);\n  sectors.push(sector3);\n  sectors.push(sector4);\n\n  player.setSector(1);\n\n  enemys.push(new Enemy(200, 200, 3, 1));\n}\n\nfunction update() {\n  handleInput();\n\n  for (let sector of sectors) {\n    sector.draw();\n  }\n\n  player.update();\n\n  for (let enemy of enemys) {\n    enemy.update();\n  }\n}\n\n// Animation Loop\nfunction animate() {\n  requestAnimationFrame(animate);\n  c.clearRect(0, 0, canvas.width, canvas.height);\n\n  update();\n}\n\ninit();\nanimate();\n\n\n// WEBPACK FOOTER //\n// ./src/canvas.js"],"sourceRoot":""}