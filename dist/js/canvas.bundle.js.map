{"version":3,"sources":["webpack:///webpack/bootstrap d712d1fc7c40d97e7dfb","webpack:///./src/util/config.js","webpack:///./src/objects/Player.js","webpack:///./src/objects/Sector.js","webpack:///./src/objects/Enemy.js","webpack:///./src/util/vector_util.js","webpack:///./src/objects/Vertex.js","webpack:///./src/objects/Bullet.js","webpack:///./src/util/canvas-util.js","webpack:///./src/inputHandler.js","webpack:///./src/canvas.js"],"names":["canvas","c","xView","yView","map","player","sectors","enemies","entityId","playerMaxHp","moveSpeed","movementPenalty","backwordsSpeed","angleAdjustments","colors","commandKeys","vectorUtil","Player","x","y","id","angle","width","height","maxHp","hp","currentSector","undefined","vecAddition","bullets","bulletDelay","lastBullet","update","entries","index","bullet","lifetime","splice","delete","fire","push","Math","cos","sin","getSector","move","friction","updatePos","vertices","neighbours","i","length","a","b","intersectBox","pointSide","n","checkForPortal","xd","yd","containsVertices","removePlayer","setSector","addPlayer","min","max","filter","sector","hit","console","log","draw","beginPath","moveTo","lineTo","strokeStyle","lineWidth","stroke","closePath","save","translate","rotate","fillStyle","rect","fill","restore","Sector","color","vCount","floorColor","players","addVertex","vertex","addNeighbour","getWallNeighbour","vertex1","vertex2","found","equal","portal","strokeWidth","drawFloor","enemy","indexOf","setFloorColor","setFriction","addEnemy","setEnemy","util","Enemy","radius","attackDelay","lastAttack","numberOfBullets","attack","randomOffset","randomIntFromRange","PI","speed","arc","clamp","overlap","vcp","intersect","input","x0","y0","x1","y1","x2","y2","x3","y3","a0","a1","b0","b1","px","py","x4","y4","pos","Vertex","other","Bullet","dx","dy","fireSpeed","owner","hitCheckEnemy","hitCheckPlayer","getDistance","stopBullet","randomColor","floor","random","xDistance","yDistance","sqrt","pow","handleInput","slower","back","inputHandler","document","querySelector","getContext","innerWidth","innerHeight","mouse","addEventListener","event","clientX","clientY","onkeydown","onkeyup","keyCode","preventDefault","type","init","vertices1","vertices2","vertices3","vertices4","sector1","sector2","sector3","sector4","animate","requestAnimationFrame","clearRect"],"mappings":"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","file":"canvas.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d712d1fc7c40d97e7dfb","export default {\n  // Initial Setup\n  canvas: null,\n  c: null,\n  xView: 280,\n  yView: 170,\n  \n  // Active keys\n  map: {},\n\n  // Objects and arrays\n  player: null,\n  sectors: [],\n  enemies: [],\n  \n  // Indexes\n  entityId: 1,\n\n  // Game values and arrays\n  playerMaxHp: 5,\n  moveSpeed: 3,\n  movementPenalty: 0.6,\n  backwordsSpeed: 0.3,\n  angleAdjustments: 0.05,\n  colors: [\n    'black',\n    'red',\n    'blue',\n    'grey'\n  ],\n  \n  // Game setup\n  commandKeys: [\n    224, \n    17, \n    91\n  ]\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/config.js","import config from '../util/config';\nimport * as vectorUtil from '../util/vector_util';\nimport Sector from './Sector';\nimport Bullet from './Bullet';\n\nexport default Player;\n\n// Player\nfunction Player(x, y, id) {\n  this.x = x;\n  this.y = y;\n  this.angle = 0;\n  this.width = 15;\n  this.height = 9;\n  this.maxHp = config.playerMaxHp;\n  this.hp = this.maxHp;\n  this.id = id;\n  this.currentSector = undefined;\n\n  this.vecAddition = []\n  this.bullets = [];\n  this.bulletDelay = 15;\n  this.lastBullet = this.bulletDelay;\n\n  this.update = function () {\n    for (let [index, bullet] of this.bullets.entries()) {\n      bullet.update();\n      if (bullet.lifetime <= 0) {\n        this.bullets.splice(index, 1);\n        bullet.delete();\n      }\n    }\n\n    this.lastBullet++;\n  };\n\n  this.fire = function () {\n    if (this.lastBullet >= this.bulletDelay) {\n      this.bullets.push(\n        new Bullet(\n          this.x,\n          this.y,\n          (Math.cos(this.angle) + (this.x)) - (this.x),\n          (Math.sin(this.angle) + (this.y)) - (this.y),\n          this.getSector(),\n          60,\n          5,\n          'rgb(255,215,0)',\n          this\n        )\n      );\n      this.lastBullet = 0;\n    }\n  };\n\n  this.move = function () {\n    this.x += this.vecAddition[0] * this.getSector().friction;\n    this.y += this.vecAddition[1] * this.getSector().friction;\n\n    config.xView = -this.x;\n    config.yView = -this.y;\n  };\n\n  this.updatePos = function (vecAddition) {\n    let vertices = this.getSector().vertices;\n    let neighbours = this.getSector().neighbours;\n\n    for(let i = 0; i < vertices.length; i++){\n      let a = vertices[i], b = vertices[i+1];\n\n      //Loop around for last corner\n      if (i == vertices.length-1) {\n        b = vertices[0];\n      }\n\n      if( vectorUtil.intersectBox(this.x , this.y, (this.x )+vecAddition[0],(this.y )+vecAddition[1], a.x, a.y, b.x, b.y) &&\n        vectorUtil.pointSide((this.x )+vecAddition[0], (this.y )+vecAddition[1], a.x, a.y, b.x, b.y) < 0) {\n\n        // Check if its a neighbour sector on the other side of wall\n        for (let n of neighbours){\n          if(this.checkForPortal(n, vecAddition, a, b)) //did we hit a portal?\n            return true;\n        }\n\n        //Bumps into a wall! Slide along the wall.\n        // This formula is from Wikipedia article \"vector projection\".\n        let xd = b.x - a.x, yd = b.y - a.y;\n        vecAddition[0] =  xd * (vecAddition[0]*xd + yd*vecAddition[1]) / (xd*xd + yd*yd);\n        vecAddition[1] =  yd * (vecAddition[0]*xd + yd*vecAddition[1]) / (xd*xd + yd*yd);\n\n        // //will you slide past this wall? - Removed for now\n        // if( (Math.min(a.x, b.x) > this.x+vecAddition[0] || this.x+vecAddition[0] > Math.max(a.x, b.x)) &&\n        //   (Math.min(a.y, b.y) > this.y+vecAddition[1] || this.y+vecAddition[1] > Math.max(a.y, b.y))  ){\n        //   //if so, stop player\n        //   vecAddition[0] = 0;\n        //   vecAddition[1] = 0;\n        // }\n\n      }\n    }\n    this.vecAddition = vecAddition;\n    this.move();\n  };\n\n  this.checkForPortal = function (n, vecAddition, a, b) {\n    if (n.containsVertices(a, b)) {\n      //is this wall a door? and if so, is it locked?\n      // door* door_ = n->getWallDoor(a,b);\n      // bool isDoorLocked = (door_ != NULL && door_->doorLocked());\n\n      this.getSector().removePlayer(this);\n      this.setSector(n.id);\n      this.getSector().addPlayer(this);\n      //after changing sector, will you hit a wall?\n      if( (Math.min(a.x, b.x) > this.x+vecAddition[0] || this.x+vecAddition[0] > Math.max(a.x, b.x)) &&\n        (Math.min(a.y, b.y) > this.y+vecAddition[1] || this.y+vecAddition[1] > Math.max(a.y, b.y))  ){\n        //if so, stop player\n        vecAddition[0] = 0;\n        vecAddition[1] = 0;\n      }\n      this.vecAddition = vecAddition;\n      this.move();\n      \n      return true;\n    }\n    return false;\n  };\n\n  this.setSector = function (id) {\n    this.currentSector = id;\n  };\n\n  this.getSector = function () {\n    return config.sectors.filter(sector => sector.id === this.currentSector)[0];\n  };\n\n  this.hit = function () {\n    if (this.hp > 1) {\n      this.hp--;\n    } else {\n      console.log('GAME OVER');\n    }\n  };\n\n  this.draw = function () {\n    config.c.beginPath();\n    config.c.moveTo(this.x, this.y);\n    config.c.lineTo(Math.cos(this.angle) * 15 + this.x, Math.sin(this.angle) * 15 + this.y);\n    config.c.strokeStyle = 'dimgrey';\n    config.c.lineWidth = 4;\n    config.c.stroke();\n    config.c.closePath();\n    config.c.lineWidth = 1;\n\n    config.c.save();\n    config.c.beginPath();\n    config.c.translate( (this.x + this.width/2) - (this.width/2), (this.y + this.height/2) - (this.height/2));\n    config.c.rotate(this.angle);\n    config.c.fillStyle = 'black';\n    config.c.rect(-this.width/2, -this.height/2, this.width, this.height);\n    config.c.fill();\n    config.c.stroke();\n    config.c.closePath();\n    config.c.restore();\n\n    //HP bar over player\n    config.c.beginPath();\n    config.c.moveTo(this.x - this.width/2, this.y - this.height * 2.2);\n    config.c.lineTo(this.x + (this.width/2), this.y - this.height * 2.2);\n    config.c.strokeStyle = 'red';\n    config.c.lineWidth = 3;\n    config.c.stroke();\n    config.c.closePath();\n    config.c.lineWidth = 1;\n\n    config.c.beginPath();\n    config.c.moveTo(this.x - this.width/2, this.y - this.height * 2.2);\n    config.c.lineTo(this.x  + ((this.width/this.maxHp) * this.hp) - this.width/2, this.y - this.height * 2.2);\n    config.c.strokeStyle = 'green';\n    config.c.lineWidth = 3;\n    config.c.stroke();\n    config.c.closePath();\n    config.c.lineWidth = 1;\n  };\n}\n\n\n// WEBPACK FOOTER //\n// ./src/objects/Player.js","import config from '../util/config';\nimport * as vectorUtil from '../util/vector_util';\nimport Vertex from './Vertex';\nimport Enemy from './Enemy';\nimport Player from './Player';\n\nexport default Sector;\n\n// Sector\nfunction Sector(id, vertices, color) {\n  this.id = id;\n  this.vCount = vertices.length;\n  this.friction = 1;\n  this.color = color;\n  this.floorColor = 'lightgrey';\n\n  this.vertices = vertices;\n  this.neighbours = [];\n  this.enemies = [];\n  this.players = [];\n\n  this.addVertex = function (vertex) {\n    this.vertices.push(vertex);\n    this.vCount++;\n  };\n\n  this.addNeighbour = function (sector) {\n    this.neighbours.push(sector);\n  };\n\n  this.getWallNeighbour = function (vertex1, vertex2) {\n    for (let sector of this.neighbours) {\n      if(sector.containsVertices(vertex1, vertex2)) {\n        return sector;\n      }\n    }\n    return null;\n  };\n\n  this.containsVertices = function (vertex1, vertex2) {\n    let found = 0;\n    for (let vertex of this.vertices) {\n      if (vertex.equal(vertex1) || vertex.equal(vertex2))\n        found++;\n    }\n\n    return found == 2;\n  };\n\n  this.draw = function () {\n    config.c.beginPath();\n\n    for(let i = 0; i < this.vertices.length; i++) {\n      let a = this.vertices[i], b = this.vertices[i + 1];\n\n      //Loop around for last corner\n      if (i == this.vertices.length-1) {\n        b = vertices[0];\n      }\n\n      if (i == 0) {\n        config.c.moveTo(vertices[0].x, vertices[0].y);\n\n        for (let n of this.neighbours) {\n          if (n.containsVertices(a, b)) {\n            config.c.moveTo(b.x, b.y);\n            i++;\n          }\n        }\n\n      } else {\n        let portal = false;\n\n        for (let n of this.neighbours){\n          if(n.containsVertices(a, b)) {\n            if (i == 1) {\n              config.c.moveTo(a.x, a.y);\n            } else {\n              config.c.lineTo(a.x, a.y);\n            }\n            config.c.lineTo(a.x, a.y);\n            config.c.moveTo(b.x, b.y);\n\n            if (i == this.vertices.length-1) {\n              config.c.moveTo(b.x, b.y);\n            }\n\n            portal = true;\n          }\n        }\n\n        if (!portal) {\n          config.c.lineTo(a.x, a.y);\n\n          if (i == this.vertices.length-1) {\n            config.c.lineTo(b.x, b.y);\n          }\n        }\n      }\n\n    }\n\n    config.c.strokeStyle = color;\n    config.c.strokeWidth = 2;\n    config.c.stroke();\n    config.c.closePath();\n\n    this.drawFloor();\n  };\n\n  this.drawFloor = function () {\n    config.c.save();\n    config.c.beginPath();\n\n    for (let [index, vertex]of this.vertices.entries()) {\n      if (index == 0) {\n        config.c.moveTo(vertex.x, vertex.y);\n      } else {\n        config.c.lineTo(vertex.x, vertex.y);\n      }\n    }\n\n    config.c.lineTo(this.vertices[0].x, this.vertices[0].y);\n    config.c.fillStyle = this.floorColor;\n    // config.c.strokeStyle = this.floorColor;\n    config.c.fill();\n    // config.c.stroke();\n    config.c.closePath();\n    config.c.restore();\n  };\n\n  this.update = function () {\n    for (let [index, enemy] of this.enemies.entries()) {\n      //todo: update enemy here\n      if(enemy.hp <= 0 && enemy.bullets.length == 0) {\n        this.enemies.splice(index, 1);\n      }\n    }\n  };\n\n  this.removePlayer = function (player) {\n    this.players.splice(this.players.indexOf(player));\n  };\n\n  this.setFloorColor = function (color) {\n    this.floorColor = color;\n  };\n\n  this.setFriction = function (friction) {\n    this.friction = friction;\n  };\n\n  this.addPlayer= function (player) {\n    this.players.push(player);\n  };\n\n  this.addEnemy= function (enemy) {\n    this.enemies.push(enemy);\n  };\n\n  this.setEnemy= function (enemies) {\n    this.enemies = enemies;\n  };\n}\n\n\n// WEBPACK FOOTER //\n// ./src/objects/Sector.js","import config from '../util/config';\nimport * as util from '../util/canvas-util';\nimport Sector from './Sector';\nimport Bullet from './Bullet';\nimport Player from './Player';\n\nexport default Enemy;\n\nfunction Enemy(x, y, hp, sector, id) {\n  this.x = x;\n  this.y = y;\n  this.color = 'yellow';\n  this.radius = 20;\n  this.id = id;\n\n  this.attackDelay = 140;\n  this.lastAttack = this.attackDelay;\n  this.numberOfBullets = 9;\n  this.bullets = [];\n\n  this.hp = hp;\n  this.sector = sector;\n\n  this.hit = function () {\n    this.radius -= 5;\n    this.hp--;\n  };\n\n  this.update = function () {\n\n    if (this.lastAttack >= this.attackDelay && this.hp > 0) {\n      for (let player of this.getSector().players) {\n        if (player.id === this.getSector().id) {\n          this.attack();\n        }\n      }\n    }\n\n    for (let [index, bullet] of this.bullets.entries()) {\n      bullet.update();\n\n      if (bullet.lifetime <= 0) {\n        this.bullets.splice(index, 1);\n      }\n    }\n\n    this.lastAttack++;\n  };\n\n  this.attack = function () {\n    let randomOffset = util.randomIntFromRange(-90, 90);\n\n    for (let i = 0; i < this.numberOfBullets; i++) {\n      let angle = (((360/this.numberOfBullets) * (i + 1) * Math.PI) / 180) + randomOffset;\n      let speed = util.randomIntFromRange(2,4);\n\n      this.bullets.push(\n        new Bullet(\n          this.x,\n          this.y,\n          Math.cos(angle) * speed,\n          Math.sin(angle) * speed,\n          this.getSector(),\n          140,\n          1,\n          'red',\n          this\n        )\n      );\n    }\n    this.lastAttack = 0;\n  };\n\n  this.draw = function () {\n    config.c.beginPath();\n    config.c.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);\n    config.c.fillStyle = this.color;\n    config.c.fill();\n    config.c.strokeStyle = 'black';\n    config.c.stroke();\n    config.c.closePath();\n  };\n\n  this.setSector = function (id) {\n    this.currentSector = id;\n  };\n\n  this.getSector = function () {\n    return config.sectors.filter(sector => sector.id === this.sector)[0];\n  };\n}\n\n\n// WEBPACK FOOTER //\n// ./src/objects/Enemy.js","// Utility Functions\n\n//if input is higher than max or lower than min, return closest option\nexport function clamp(input, min, max){\n  return Math.min(Math.max(input, min), max);\n}\n\n//does the two boxes intersect?\nexport function intersectBox(x0, y0, x1, y1, x2, y2, x3, y3) {\n  return overlap(x0,x1,x2,x3) && overlap(y0,y1,y2,y3);\n}\n\n//find out if number-ranges overlap. Used to determine intersects\nexport function overlap(a0, a1, b0, b1) {\n  return Math.min(a0,a1) <= Math.max(b0,b1) && Math.min(b0,b1) <= Math.max(a0,a1);\n}\n\nexport function vcp(x0, y0, x1, y1) {\n  return ((x0 * y1) - (x1 * y0));\n}\n\nexport function pointSide(px, py, x0, y0, x1, y1) {\n  return vcp((x1-x0), (y1-y0), (px-x0), (py-y0));\n}\n\nexport function intersect(x1, y1, x2, y2, x3, y3, x4, y4){\n  let pos = {};\n\n  pos.x = vcp( vcp( x1,y1,x2,y2 ), ( x1 - x2 ), vcp(x3,y3,x4,y4) ,\n      ( x3 - x4 )) / vcp( ( x1-x2 ),( y1-y2 ),( x3-x4 ),( y3-y4 ) );\n\n  pos.y = vcp( vcp( x1,y1,x2,y2 ), ( y1 - y2 ), vcp(x3,y3,x4,y4) ,\n      ( y3 - y4 )) / vcp( ( x1-x2 ),( y1-y2 ),( x3-x4 ),( y3-y4 ) );\n\n  return pos;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/vector_util.js","export default Vertex;\n\n// Vertex\nfunction Vertex(x, y) {\n  this.x = x;\n  this.y = y;\n\n  this.equal = function (other) {\n    return this.x == other.x && this.y == other.y;\n  };\n}\n\n\n// WEBPACK FOOTER //\n// ./src/objects/Vertex.js","import config from '../util/config';\nimport * as util from '../util/canvas-util';\nimport * as vectorUtil from '../util/vector_util';\nimport Sector from './Sector';\nimport Enemy from './Enemy';\nimport Player from './Player';\n\nexport default Bullet;\n\n// Bullet\nfunction Bullet(x, y, dx, dy, sector, lifetime, fireSpeed, color, owner) {\n  this.x = x;\n  this.y = y;\n  this.radius = 3;\n  this.fireSpeed = fireSpeed;\n  this.dx = dx * this.fireSpeed;\n  this.dy = dy * this.fireSpeed;\n  this.lifetime = lifetime;\n  this.sector = sector;\n  this.color = color;\n  this.owner = owner;\n\n  this.update = function () {\n    //Check if bullet hit players og enemy\n    if(this.owner instanceof Player) {\n      this.hitCheckEnemy();\n    } else {\n      this.hitCheckPlayer();\n    }\n\n    let vertices = this.sector.vertices;\n    let neighbours = this.sector.neighbours;\n\n    for(let i = 0; i < vertices.length; i++) {\n      let a = vertices[i], b = vertices[i + 1];\n      let portal = false;\n\n      //Loop around for last corner\n      if (i == vertices.length - 1) {\n        b = vertices[0];\n      }\n\n      if (vectorUtil.intersectBox(this.x, this.y, (this.x ) + this.dx, (this.y ) + this.dy, a.x, a.y, b.x, b.y) &&\n        vectorUtil.pointSide((this.x ) + this.dx, (this.y ) + this.dy, a.x, a.y, b.x, b.y) < 0) {\n\n        for (let n of neighbours) {\n          if (n.containsVertices(a, b)) {\n            this.sector = n;\n            portal = true;\n          }\n        }\n        if (!portal) {\n          this.lifetime = 0;\n        }\n      }\n    }\n\n    if(this.lifetime > 0) {\n      this.x += this.dx;\n      this.y += this.dy;\n      this.lifetime -= 1;\n    }\n  };\n\n  this.hitCheckEnemy = function () {\n    for (let enemy of this.sector.enemies) {\n      if (util.getDistance(enemy.x, enemy.y, this.x, this.y) < this.radius + enemy.radius && enemy.hp > 0) {\n        enemy.hit();\n        this.stopBullet();\n      }\n    }\n  };\n\n  this.hitCheckPlayer = function () {\n    for (let player of this.sector.players) {\n      if (util.getDistance(player.x, player.y, this.x, this.y) < this.radius + player.height) {\n        player.hit();\n        this.stopBullet();\n      }\n    }\n  };\n\n  this.draw = function () {\n    config.c.beginPath();\n    config.c.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);\n    config.c.fillStyle = this.color;\n    config.c.fill();\n    config.c.lineWidth = 0.3;\n    config.c.stroke();\n    config.c.closePath();\n    config.c.lineWidth = 1;\n  };\n\n  this.stopBullet = function () {\n    this.lifetime = 0;\n  }\n\n  this.delete = function () {\n    delete this;\n  };\n}\n\n\n// WEBPACK FOOTER //\n// ./src/objects/Bullet.js","// Utility Functions\nexport function randomIntFromRange(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nexport function randomColor(colors) {\n  return colors[Math.floor(Math.random() * colors.length)];\n}\n\nexport function getDistance(x1, y1, x2, y2) {\n  let xDistance = x2 - x1;\n  let yDistance = y2 - y1;\n\n  return Math.sqrt(Math.pow(xDistance, 2) + Math.pow(yDistance, 2));\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/canvas-util.js","import config from './util/config';\nimport Player from './objects/Player';\n\nexport function handleInput() {\n  let vecAddition = [ 0, 0 ], slower = false, back = false;\n\n  //up - unused\n  if (config.map[38]) {\n    console.log('unused - up');\n  }\n  //left - move player angle up (left)\n  if (config.map[39]) {\n    config.player.angle += config.angleAdjustments;\n  }\n  //right - move player angle down (right)\n  if (config.map[37]) {\n    config.player.angle -= config.angleAdjustments;\n  }\n  //down - unused\n  if (config.map[40]) {\n    console.log('unused - down');\n  }\n  //a - move player left\n  if (config.map[65]) {\n    vecAddition[0] += Math.sin(config.player.angle) * config.moveSpeed;\n    vecAddition[1] -= Math.cos(config.player.angle) * config.moveSpeed;\n    slower = true;\n  }\n  //d - move player right\n  if (config.map[68]) {\n    vecAddition[0] -= Math.sin(config.player.angle) * config.moveSpeed;\n    vecAddition[1] += Math.cos(config.player.angle) * config.moveSpeed;\n    slower = true;\n  }\n  //w - move player up\n  if (config.map[87]) {\n    vecAddition[0] += Math.cos(config.player.angle) * config.moveSpeed;\n    vecAddition[1] += Math.sin(config.player.angle) * config.moveSpeed;\n  }\n  //s - move player down\n  if (config.map[83]) {\n    vecAddition[0] -= Math.cos(config.player.angle) * config.moveSpeed;\n    vecAddition[1] -= Math.sin(config.player.angle) * config.moveSpeed;\n    back = true;\n  }\n  //fire bullet\n  if (config.map[32]) {\n    config.player.fire();\n  }\n\n  if (back) {\n    vecAddition[0] = vecAddition[0] * config.backwordsSpeed;\n    vecAddition[1] = vecAddition[1] * config.backwordsSpeed;\n  } else if(slower) {\n    vecAddition[0] = vecAddition[0] * config.movementPenalty;\n    vecAddition[1] = vecAddition[1] * config.movementPenalty;\n  }\n\n  config.player.updatePos(vecAddition);\n}\n\n\n// WEBPACK FOOTER //\n// ./src/inputHandler.js","import * as inputHandler from './inputHandler';\nimport Player from './objects/Player';\nimport Vertex from './objects/Vertex';\nimport Sector from './objects/Sector';\nimport Enemy from './objects/Enemy';\nimport config from './util/config';\n\n// // Initial Setup\nconfig.canvas = document.querySelector('canvas');\nconfig.c = config.canvas.getContext('2d');\n\nconfig.canvas.width = innerWidth;\nconfig.canvas.height = innerHeight;\n\nconfig.player = new Player(150, 100, config.entityId++);\n\n// Variables\nlet mouse = {\n  x: innerWidth / 2,\n  y: innerHeight / 2\n};\n\n// Event Listeners\naddEventListener(\"mousemove\", function (event) {\n  mouse.x = event.clientX;\n  mouse.y = event.clientY;\n});\n\naddEventListener(\"resize\", function () {\n  config.canvas.width = innerWidth;\n  config.canvas.height = innerHeight;\n\n  // init();\n});\n\nonkeydown = onkeyup = function(event){\n  if(!config.commandKeys.indexOf(event.keyCode)) {\n    event.preventDefault();\n  }\n  config.map[event.keyCode] = event.type == 'keydown';\n}\n\nfunction init() {\n  let vertices1 = [], vertices2 = [], vertices3 = [], vertices4 = [];\n  vertices1.push(new Vertex(50, 25));\n  vertices1.push(new Vertex(300, 25));\n  vertices1.push(new Vertex(300, 125));\n  vertices1.push(new Vertex(300, 175));\n  vertices1.push(new Vertex(300, 250));\n  vertices1.push(new Vertex(50, 250));\n\n  vertices2.push(new Vertex(300, 125));\n  vertices2.push(new Vertex(500, 125));\n  vertices2.push(new Vertex(500, 175));\n  vertices2.push(new Vertex(400, 175));\n  vertices2.push(new Vertex(300, 175));\n\n  vertices3.push(new Vertex(500, 175));\n  vertices3.push(new Vertex(500, 500));\n  vertices3.push(new Vertex(400, 500));\n  vertices3.push(new Vertex(400, 400));\n  vertices3.push(new Vertex(400, 175));\n\n  vertices4.push(new Vertex(400, 400));\n  vertices4.push(new Vertex(400, 500));\n  vertices4.push(new Vertex(400, 600));\n  vertices4.push(new Vertex(50, 600));\n  vertices4.push(new Vertex(50, 300));\n  vertices4.push(new Vertex(250, 300));\n  vertices4.push(new Vertex(250, 400));\n\n  let sector1 = new Sector(1, vertices1, 'black');\n  let sector2 = new Sector(2, vertices2, 'black');\n  let sector3 = new Sector(3, vertices3, 'black');\n  let sector4 = new Sector(4, vertices4, 'black');\n  sector4.setFloorColor('darkolivegreen');\n  sector4.setFriction(0.7);\n\n  sector1.addNeighbour(sector2);\n  sector2.addNeighbour(sector1);\n  sector2.addNeighbour(sector3);\n  sector3.addNeighbour(sector2);\n  sector3.addNeighbour(sector4);\n  sector4.addNeighbour(sector3);\n\n  config.sectors.push(sector1);\n  config.sectors.push(sector2);\n  config.sectors.push(sector3);\n  config.sectors.push(sector4);\n\n  config.player.setSector(1);\n  sector1.addPlayer(config.player);\n\n  //todo: Want to shift this info sections again, but when other sections \"overdraw\" stuff like bullets\n  let enemy = new Enemy(280, 170, 3, 1, config.entityId++);\n  config.enemies.push(enemy);\n  sector1.addEnemy(enemy);\n}\n\n// Update all objects\nfunction update() {\n  inputHandler.handleInput();\n\n  for (let sector of config.sectors) {\n    sector.update();\n  }\n\n  for (let enemy of config.enemies) {\n    enemy.update();\n  }\n\n  config.player.update();\n}\n\nfunction draw() {\n  config.c.save();\n  // center \"camera\" over player\n  config.c.translate(config.xView + config.canvas.width/2, config.yView + config.canvas.height/2);\n\n  for (let sector of config.sectors) {\n    sector.draw();\n  }\n\n  for (let enemy of config.enemies) {\n    for (let bullet of enemy.bullets) {\n      if (bullet.lifetime > 0) {\n        bullet.draw();\n      }\n    }\n    if (enemy.hp > 0) {\n      enemy.draw();\n    }\n  }\n\n  for (let bullet of config.player.bullets) {\n    if (bullet.lifetime > 0) {\n      bullet.draw();\n    }\n  }\n  config.player.draw();\n\n  config.c.restore();\n}\n\n// Animation Loop\nfunction animate() {\n  requestAnimationFrame(animate);\n  config.c.clearRect(0, 0, config.canvas.width, config.canvas.height);\n\n  update();\n  draw();\n}\n\ninit();\nanimate();\n\n\n// WEBPACK FOOTER //\n// ./src/canvas.js"],"sourceRoot":""}